{"ast":null,"code":"let accessToken;\nlet client_id = '6fcae6e681ed465d9b593ad989a8b758';\nlet redirect_uri = 'http://http://localhost:3000';\nlet Spotify = {\n  getAccessToken() {\n    if (accessToken) {\n      return accessToken;\n    }\n\n    console.log('what');\n    const accessTokenMatch = window.location.href.match(/access_token=([^&]*)/);\n    const expiresInMatch = window.location.href.match(/expires_in=([^&]*)/);\n\n    if (accessTokenMatch && expiresInMatch) {\n      accessToken = accessTokenMatch[1];\n      const expiresIn = Number(expiresInMatch[1]);\n      window.setTimeout(() => accessToken = '', expiresIn * 1000);\n      window.history.pushState('Access Token', null, '/');\n      return accessToken;\n    } else {\n      const accessUrl = `https://accounts.spotify.com/authorize?client_id=${client_id}&response_type=token&scope=playlist-modify-public&redirect_uri=${redirect_uri}`;\n      window.location = accessUrl;\n    }\n  }\n\n};\nexport default Spotify;","map":{"version":3,"sources":["/Users/roberttiu/Progetti/jammming/src/util/Spotify/Spotify.js"],"names":["accessToken","client_id","redirect_uri","Spotify","getAccessToken","console","log","accessTokenMatch","window","location","href","match","expiresInMatch","expiresIn","Number","setTimeout","history","pushState","accessUrl"],"mappings":"AAAA,IAAIA,WAAJ;AACA,IAAIC,SAAS,GAAG,kCAAhB;AACA,IAAIC,YAAY,GAAG,8BAAnB;AACA,IAAIC,OAAO,GAAG;AACVC,EAAAA,cAAc,GAAG;AACb,QAAGJ,WAAH,EAAgB;AACZ,aAAOA,WAAP;AACH;;AACDK,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,UAAMC,gBAAgB,GAAGC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBC,KAArB,CAA2B,sBAA3B,CAAzB;AACA,UAAMC,cAAc,GAAGJ,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBC,KAArB,CAA2B,oBAA3B,CAAvB;;AACA,QAAGJ,gBAAgB,IAAIK,cAAvB,EAAuC;AACnCZ,MAAAA,WAAW,GAAIO,gBAAgB,CAAC,CAAD,CAA/B;AACA,YAAMM,SAAS,GAAGC,MAAM,CAACF,cAAc,CAAC,CAAD,CAAf,CAAxB;AACAJ,MAAAA,MAAM,CAACO,UAAP,CAAmB,MAAMf,WAAW,GAAG,EAAvC,EAA2Ca,SAAS,GAAG,IAAvD;AACAL,MAAAA,MAAM,CAACQ,OAAP,CAAeC,SAAf,CAAyB,cAAzB,EAAyC,IAAzC,EAA+C,GAA/C;AACA,aAAOjB,WAAP;AACH,KAND,MAOK;AACD,YAAMkB,SAAS,GAAI,oDAAmDjB,SAAU,kEAAiEC,YAAa,EAA9J;AACAM,MAAAA,MAAM,CAACC,QAAP,GAAkBS,SAAlB;AACH;AAEJ;;AApBS,CAAd;AAyBA,eAAef,OAAf","sourcesContent":["let accessToken;\nlet client_id = '6fcae6e681ed465d9b593ad989a8b758';\nlet redirect_uri = 'http://http://localhost:3000';\nlet Spotify = {\n    getAccessToken() {\n        if(accessToken) {\n            return accessToken;\n        }\n        console.log('what');\n        const accessTokenMatch = window.location.href.match(/access_token=([^&]*)/);\n        const expiresInMatch = window.location.href.match(/expires_in=([^&]*)/);\n        if(accessTokenMatch && expiresInMatch) {\n            accessToken =  accessTokenMatch[1];\n            const expiresIn = Number(expiresInMatch[1]);\n            window.setTimeout( () => accessToken = '', expiresIn * 1000);\n            window.history.pushState('Access Token', null, '/');\n            return accessToken;\n        }\n        else {\n            const accessUrl = `https://accounts.spotify.com/authorize?client_id=${client_id}&response_type=token&scope=playlist-modify-public&redirect_uri=${redirect_uri}`\n            window.location = accessUrl;\n        }\n\n    }\n\n}\n\n\nexport default Spotify;"]},"metadata":{},"sourceType":"module"}